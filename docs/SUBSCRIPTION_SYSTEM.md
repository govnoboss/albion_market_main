# Система Подписки: Отчет и Инструкция

## 1. Отчет о проделанной работе

Мы успешно реализовали **Фазу 1** коммерческой версии бота: систему лицензирования с привязкой к железу (HWID).

### Реализованные компоненты:
1.  **Сервер Лицензий (`server/`)**:
    *   Построен на **FastAPI** (современный, быстрый фреймворк).
    *   Использует **SQLite** для хранения ключей (файл `licenses.db`).
    *   Реализованы API методы для проверки, активации и создания ключей.

2.  **Защита Клиента (`src/core/license.py`)**:
    *   **HWID**: Уникальный идентификатор генерируется из `Серийника Платы` + `ID Процессора` + `Windows MachineGuid`. Это гарантирует уникальность и защиту от клонирования.
    *   **LicenseManager**: Отвечает за общение с сервером.

3.  **Интерфейс (`src/ui/`)**:
    *   **LoginWindow**: Окно активации, которое блокирует доступ к боту без валидного ключа.
    *   **Launcher**: Изменен алгоритм запуска. Сначала проверка -> потом запуск.

---

## 2. Инструкция Администратора (Вас)

### Шаг 1: Запуск Сервера
Перед тем как раздавать ключи, сервер должен работать.

**Локальный запуск (для тестов):**
1. Откройте терминал в папке проекта.
2. Установите библиотеки (если еще не сделали):
   ```bash
   pip install fastapi uvicorn sqlalchemy requests pydantic
   ```
3. Запустите сервер:
   ```bash
   python server/main.py
   ```
   *Вы увидите сообщение: `Uvicorn running on http://127.0.0.1:8000`*

### Шаг 2: Генерация Ключей
У вашего сервера есть удобная админ-панель (Swagger UI).

1. Откройте в браузере: **[http://localhost:8000/docs](http://localhost:8000/docs)**
2. Вы увидите список кодов. Найдите зеленый блок **POST /api/v1/admin/generate**.
3. Нажмите кнопку **Try it out** (справа).
4. Заполните поля в JSON:
   ```json
   {
     "admin_password": "secret_password",  <-- Пароль (меняется в server/main.py)
     "days": 30,                           <-- Срок действия ключа (дней)
     "count": 1                            <-- Сколько ключей создать
   }
   ```
5. Нажмите большую синюю кнопку **Execute**.
6. Внизу в поле **Response body** появится ваш новый ключ:
   ```json
   {
     "count": 1,
     "keys": [
       "550E8400-E29B-41D4-A716-446655440000"  <-- Скопируйте этот ключ
     ],
     "expires_at": "2026-03-08..."
   }
   ```

### Шаг 3: Управление (Сброс привязки)
*Пока реализована только генерация. Если пользователю нужно сменить ПК, вы можете просто выдать ему новый ключ или удалить запись из `licenses.db` (через любую программу для SQLite).*

---

## 3. Инструкция для Пользователя

1. Пользователь запускает `GBot.exe` (или скрипт).
2. Бот проверяет наличие файла лицензии.
3. Если ключа нет — открывается окно **GBot Activation**.
4. Пользователь вставляет ключ (который вы ему продали).
5. Нажимает **ACTIVATE**.
6. Бот привязывается к железу (HWID) этого ПК.
7. Открывается главное меню.

---

## 4. Следующий этап: Компиляция

Сейчас система работает на Python-скриптах. Чтобы защитить проверку от удаления (чтобы нельзя было открыть код и стереть `if check_license...`), нам нужно превратить проект в **.exe файл**.

Для этого будем использовать **Nuitka**. Это сделает код нечитаемым для обычных людей.
